# Общение в ROS

Давайте посмотрим, как два узла взаимодействуют друг с другом, используя темы ROS. Следующая диаграмма показывает, как это происходит:

![&#x420;&#x438;&#x441;&#x443;&#x43D;&#x43E;&#x43A; 9: &#x421;&#x432;&#x44F;&#x437;&#x44C; &#x43C;&#x435;&#x436;&#x434;&#x443; &#x443;&#x437;&#x43B;&#x430;&#x43C;&#x438; ROS &#x441; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x435;&#x43C; &#x442;&#x435;&#x43C;](../../.gitbook/assets/image%20%2834%29.png)

  
Как видите, есть два узла, называемые говорящим\(talker\) и слушающим\(listener\). Узел говорящего публикует строковое сообщение с именем Hello World в теме / talker, а узел слушателя подписывается на эту тему. Давайте посмотрим, что происходит на каждом этапе, отмеченным \(1\), \(2\) и \(3\):

1. Прежде чем запускать какие-либо узлы в ROS, мы должны запустить ROS Master. После того, как он был запущен, он будет ждать узлов. Когда узел говорящего \(издатель\) начинает работать, он сначала подключается к мастеру ROS и обменивается подробностями темы публикации с мастером. Это включает в себя имя темы, тип сообщения и URI узла публикации. URI мастера является глобальным, и к нему могут подключаться все узлы. Мастер ведет таблицы издателя, связанные с ним. При изменении данных издателя таблица обновляется автоматически.
2. Когда мы запускаем узел слушателя \(подписчик\), он подключается к мастеру и обменивается сведениями об узле, такими как тема, на которую планируется подписаться, тип ее сообщения и URI узла. Мастер также ведет таблицу подписчиков, аналогичную издателю.
3. Когда есть подписчик и издатель для одной и той же темы, главный узел будет обмениваться URI издателя с подписчиком. Это поможет обоим узлам соединяться друг с другом и обмениваться данными. После того, как они соединились друг с другом, у мастера нет роли. Данные не проходят через мастер; вместо этого узлы взаимосвязаны и обмениваются сообщениями.

